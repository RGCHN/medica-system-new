(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[286],{52601:function(Y,x,e){"use strict";e.r(x),e.d(x,{default:function(){return oe}});var m=e(2824),s=e(67294),A=e(57895),Z=e(71153),h=e(60331),P=e(49111),D=e(19650),I=e(12968),v=e(62462),S=e(34792),L=e(48086),E=e(3182),Le=e(7359),K=e(27279),J=e(94043),B=e.n(J),X=e(10216),H=e(64172),o=e(75297),W=e(21010),t=e(85893),F=K.Z.Panel,k=function(){var j=(0,s.useState)([]),i=(0,m.Z)(j,2),c=i[0],d=i[1],p=(0,s.useState)(0),f=(0,m.Z)(p,2),de=f[0],Ae=f[1],fe=(0,s.useState)(!1),V=(0,m.Z)(fe,2),ve=V[0],z=V[1],ce=(0,s.useState)([]),b=(0,m.Z)(ce,2),ge=b[0],me=b[1],he=(0,s.useState)(!0),G=(0,m.Z)(he,2),pe=G[0],ye=G[1],$=(0,W.tT)("patient"),Ze=$.getPatientData,De=$.getPatientID,je=Ze(),w=De(),N=(0,W.YB)(),Ce=(0,s.useCallback)((0,E.Z)(B().mark(function g(){var l,a,C;return B().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,H.yL)({patientID:w});case 3:if(l=n.sent,l.data.status!=="success"){n.next=9;break}return a=(0,o.U)(l,"data.data.results",[]),a&&a.length!==0&&(a=a.map(function(u){return{time:(0,o.U)(u,"time",""),ADCList:(0,o.U)(u,"adc.adc_imgs",[]),DWIList:(0,o.U)(u,"dwi.dwi_imgs",[]),nonPerfusion:(0,o.U)(u,"non_perfusion.non_perfusion_imgs",[]),perfusionList:(0,o.U)(u,"perfusion.perfusion_imgs",[]),modelType:(0,o.U)(u,"modelType",0).toString(),resultId:(0,o.U)(u,"id",0),resultInfo:(0,o.U)(u,"info",0).toFixed(2),resultSize:(0,o.U)(u,"size_percent",0)}}),d(a)),ye(!1),n.abrupt("return");case 9:L.default.error(l.data.msg),n.next=17;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0),C=N.formatMessage({id:"app.error.network",defaultMessage:"\u7F51\u7EDC\u8FDE\u63A5\u9519\u8BEF\uFF01"}),L.default.error(C);case 17:case"end":return n.stop()}},g,null,[[0,12]])})),[w]),Se=function(){var g=(0,E.Z)(B().mark(function l(a){var C,R,n,u,y,Q;return B().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!ve){r.next=2;break}return r.abrupt("return");case 2:return z(!0),C=a.resultId,r.prev=4,r.next=7,(0,H.QL)({resultID:C});case 7:R=r.sent,n=new Blob([R.data],{type:"application/pdf"}),u=URL.createObjectURL(n),y=document.createElement("a"),y.style.display="none",y.href=u,y.download="\u8F85\u52A9\u8BCA\u65AD\u62A5\u544A-".concat(je.name,"-").concat(a.time),document.body.appendChild(y),y.click(),document.body.removeChild(y),z(!1),r.next=26;break;case 20:r.prev=20,r.t0=r.catch(4),z(!1),Q=N.formatMessage({id:"app.error.network",defaultMessage:"\u7F51\u7EDC\u8FDE\u63A5\u9519\u8BEF\uFF01"}),L.default.error(Q),console.log(r.t0);case 26:case"end":return r.stop()}},l,null,[[4,20]])}));return function(a){return g.apply(this,arguments)}}(),M=(0,s.useCallback)(function(g){if(g.length!==0)return(0,t.jsx)(v.Z.PreviewGroup,{children:(0,t.jsx)(D.Z,{wrap:!0,children:g.map(function(l,a){return(0,t.jsx)(v.Z,{src:l,alt:"",height:"80px",width:"80px"},a)})})})},[]);return(0,s.useEffect)(function(){Ce()},[]),(0,t.jsx)(X.Z,{loading:pe,rowKey:"resultId",split:!0,expandable:{expandedRowKeys:ge,onExpandedRowsChange:me},dataSource:c,metas:{title:{render:function(l,a){return(0,t.jsxs)(D.Z,{children:[(0,t.jsx)(h.Z,{color:"blue",children:a.time}),(0,t.jsxs)(h.Z,{color:"geekblue",children:["\u6897\u6B7B\u533A\u57DF\u5360\u6BD4",(a.resultSize/100).toFixed(2),"%"]}),(0,t.jsx)(h.Z,{color:"green",onClick:function(){return Se(a)},children:"\u4E0B\u8F7D\u8F85\u52A9\u62A5\u544A"})]})}},description:{render:function(l,a){return(0,t.jsxs)(K.Z,{defaultActiveKey:[de],children:[(0,t.jsx)(F,{header:"ADC\u5F71\u50CF",children:M(a.ADCList)},"ADC"),(0,t.jsx)(F,{header:"DWI\u5F71\u50CF",children:M(a.DWIList)},"DWI"),(0,t.jsx)(F,{header:"\u6897\u6B7B\u533A\u5206\u5272\u7ED3\u679C",children:M(a.perfusionList)},"perfusion"),(0,t.jsx)(F,{header:"\u6897\u6B7B\u533A\u53D1\u5C55\u9884\u6D4B",children:M(a.nonPerfusion)},"nonPerfusion")]})}}}})},q=k,xe=e(13254),_=e(14277),U=e(11849),ee=e(69610),te=e(54941),ae=e(81306),ne=e(19809),re=e(86375),se=[{time:"2020-05-12",size:20+Math.random()},{time:"2020-05-20",size:16+Math.random()},{time:"2020-06-12",size:14+Math.random()},{time:"2020-06-18",size:12+Math.random()},{time:"2020-06-22",size:12+Math.random()},{time:"2020-07-01",size:12+Math.random()},{time:"2020-07-10",size:11+Math.random()}],ue={padding:"auto",forceFit:!0,title:{visible:!0,text:"\u6897\u6B7B\u533A\u57DF\u9762\u79EF\u53D8\u5316\u8D8B\u52BF"},xField:"time",yField:"size"},ie=function(T){(0,ae.Z)(i,T);var j=(0,ne.Z)(i);function i(){var c;(0,ee.Z)(this,i);for(var d=arguments.length,p=new Array(d),f=0;f<d;f++)p[f]=arguments[f];return c=j.call.apply(j,[this].concat(p)),c.state={trendList:se},c}return(0,te.Z)(i,[{key:"render",value:function(){var d=this.state.trendList,p=(0,U.Z)((0,U.Z)({},ue),{},{data:d});return d.length===0?(0,t.jsx)(_.Z,{description:"\u6682\u65E0\u6570\u636E"}):(0,t.jsx)("div",{className:"trend-container",children:(0,t.jsx)(re.Z,(0,U.Z)({},p))})}}]),i}(s.Component),O=A.ZP.TabPane,le=function(){var j=(0,s.useState)("history"),i=(0,m.Z)(j,2),c=i[0],d=i[1];return(0,t.jsxs)(A.ZP,{tabs:{activeKey:c,onChange:function(f){d(f)}},children:[(0,t.jsx)(O,{tab:"\u5386\u53F2\u9884\u6D4B\u8BB0\u5F55",children:(0,t.jsx)(q,{})},"history"),(0,t.jsx)(O,{tab:"\u6897\u6B7B\u533A\u53D8\u5316\u8D8B\u52BF",children:(0,t.jsx)(ie,{})},"trend")]})},oe=le},75297:function(Y,x,e){"use strict";e.d(x,{U:function(){return s}});var m=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(h){setTimeout(function(){h(!0)},Z)})},s=function(Z,h){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!Z||typeof Z!="object")return P;for(var D=h.replace(/\[/g,".").replace(/\]/g,"").split(".").filter(function(L){return L}),I=!0,v=Z,S=0;S<D.length;S++){if(!v||Object.keys(v).indexOf(D[S])<0){I=!1;break}v=v[D[S]]}return I?v:P}}}]);
